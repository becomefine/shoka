---
title: 第一章
date: 2022-05-23 09:08:26
categories:
 - [大数据,离散系统]
tags: 
 - 大数据
 - 离散系统
---

# 前言

离散系统定义：状态的变化仅在一些离散时刻点上由随机事件引发。

## 仿真基本概念

模型是真实系统的代替品，包含了反映所研究系统的特征和规律的相关信息。模型是为了达到系统分析研究的目的，经过对系统的抽象和简化所构建的反映系统特征和规律的相关信息的载体。对模型进行实验应当获取与真实系统试验一致的观测数据，而这种利用模型代替真实系统进行试验和分析的过程称为仿真。

### 计算机仿真

三项基本要素：
1. 系统
工程系统&非工程系统
系统由若干物理或逻辑上相对独立的单元及其相互关系构成
实体：构成系统的物质、能量、信息和组织等有实际意义的物理或逻辑单元。
属性：实体所具有的主要特征，可以用参数或状态(state)加以描述。

2. 模型
对系统特性和规律的描述，提供关于系统的有用信息。一般用数学、逻辑或其他抽象的方法进行描述。
连续时间模型&离散时间模型
连续时间模型：系统的状态可以在任意时刻点获得。
离散系统模型：系统的状态只能在离散的时刻点获得。

连续变化模型&离散变化模型
连续变化模型：系统的状态变量随时间连续变化。在任意时刻可获得系统状态变量值，对应的一般是常微分系统模型和连续时间的偏微分方程模型。
离散变化模型：系统状态变量的变化是不连续的，在特定时刻变化，在两个特定时刻之间保持不变。
![连续时间模型](/assets/decrete-modeling/figure1-3.jpg)

第一类：常微分方程模型和连续时间的偏微分方程模型
第二类：离散时间的偏微分方程模型和系统动力学模型
第三类：离散时间系统模型
第四类：差分方程模型

五类模型：
1) 概念模型(conceptual model): 以形象的方式对系统的实体、属性、行为和关系等进行概念性的描述。对象图是一种比较自然、规范和完善的概念模型方法，采用类、对象、属性和方法函数等来描述系统的基本特征和变化规律。
2) 描述模型(declarative model): 基于状态、事件以及二者之间的转移关系描述系统的行为，并通过状态变化序列研究系统的行为。常用的描述模型包括有限状态机、有限事件机、Markov链、Petri网等。
3) 功能模型(functional model): 基于功能和变量描述系统的行为，并能够以图形符号进行表达。常见的功能模型有功能框图、信号流图、随机网络图、系统动力学流图等，功能框图最为典型，通过功能模块之间的输入输出关系对系统的行为进行描述。
4) 约束模型(constraint model): 用代数方程、常微分方程等数学方法或Bond图描述系统的内在规律和行为。常微分方程是一种典型的约束模型，可以转换为响应的功能框图模型。Bond图是工程技术人员经常采用的一种约束模型，基于能量和能量转换关系，采用统一的方法对电磁学、力学、水力学、空气动力学、热力学和材料力学等领域的物理学原理进行描述，为不同工程领域的建模提供统一的视图。
5) 空间模型(spatial model):根据空间分布关系对系统进行分解，并通过子空间的行为、规则和相互关系描述系统的整体行为。目前主要采用相格法建立空间模型。将相格空间的规则与交通规则和车辆行驶速度等因素结合起来，可以建立复杂的交通系统模型。将相格空间向三维空间扩展时，根据植物的空间生长规则，可以建立植物生长模型。空间模型还可用于建立偏微分方程的求解算法。

3. 试验
主要任务：
- 根据试验需求所规定的的试验类型与试验目的
- 明确试验所应用的仿真背景、试验类别与试验方法
- 确定试验因子及其变化规律
- 建立试验指标与模型响应的关联
- 明确仿真试验的终结方式
- 制定试验方案
- 依据方案进行仿真试验并收集仿真试验数据
- 对试验数据进行分析和处理

机械制造工业经历了从手工业到大机器再到大规模流水生产线的发展历程，柔性制造系统和计算机集成制造系统使得机械制造工业的自动化程度有了很大的提高。在自动化生产线上加工产品，其生产工艺流程安排通过计算机仿真完成，每个工件什么时候通过自动小车运送到机床上加工，什么时候送到哪一个缓冲站等候加工，其中存在着复杂的优化决策问题，通过计算机仿真找出最佳控制方案。

### 仿真建模的基本原则

1. 准确把握仿真目的
2. 有效利用领域知识
3. 正确选取研究途径
4. 科学利用建模方法
5. 充分保证模型的可信程度

### 仿真研究的基本步骤

1. 问题描述与需求分析
2. 模型设计与数据准备
3. 仿真开发与模型校验
4. 仿真试验与结果分析

## 连续系统仿真

### 连续系统模型

1. 常微分方程模型
设系统的输入变量为$u(t)$，输出变量为$y(t)$, 线性常微分方程描述的系统数学模型一般形式:
$$
\frac{\mathrm{d}^{n} y}{\mathrm{~d} t^{n}}+a_{1} \frac{\mathrm{d}^{n-1} y}{\mathrm{~d} t^{n-1}}+\cdots+a_{n-1} \frac{\mathrm{d} y}{\mathrm{~d} t}+a_{n} y=C_{0} \frac{\mathrm{d}^{n-1} u}{\mathrm{~d} t^{n-1}}+C_{1} \frac{\mathrm{d}^{n-2} u}{\mathrm{~d} t^{n-2}}+\cdots+C_{n-1} u    (1.2.1)
$$ 

其中$a_{i}(i=1,2,...,n)$为输出变量的系数，$C_{j}(j=0,1,...,n-1)$为输入变量的系数。
当$u=0$, 即系统没有输入函数时，上式变为齐次常微分方程
$$
\frac{\mathrm{d}^{n} y}{\mathrm{~d} t^{n}}+a_{1} \frac{\mathrm{d}^{n-1} y}{\mathrm{~d} t^{n-1}}+\cdots+a_{n-1} \frac{\mathrm{d} y}{\mathrm{~d} t}+a_{n} y = 0            (1.2.2)
$$
线性常微分方程模型是连续系统仿真中连续时间模型的基本形式。

2. 传递函数模型
设系统的初始条件为零，即输入函数$u(t)$和输出变量$y(t)$及其各阶导数的初值均为零，系统在$t=0$f时刻处于一个稳定状态。对式取拉普拉斯变换：
$$
s^{n}Y(s)+a_{1}s^{n-1}Y(s)+...+a_{2}sY(s)+a_{n}Y(s)=C_{0}s^{n-1}U(s)+C_{1}s^{n-2}U(s)+...+C_{n-1}U(s)   (1.2.3)
$$

3. 状态系统模型
状态变量技术是利用$n$个一阶的微分方程去代替一个$n$阶的微分方程，因此，用状态变量描述的系统仿真主要是同步地求解$n$个一阶方程。

4. 连续系统数学模型示例

### 连续系统仿真算法

## 离散事件系统仿真

### 离散事件系统模型

基本概念：
1. 实体
临时实体&永久实体
临时实体(动态实体)：系统中活动的部分，在某时刻到达并进入系统，在系统中停留一段时间并与其他实体发生作用后即离开系统。
永久实体(资源)： 系统中固定的部分，永久停留在系统中并为临时实体提供某种服务或资源保障。

2. 事件(event)
引发系统状态变化的瞬间行为。只有当事件发生时，系统状态才会发生变化。

3. 活动(activity)
表示两个相邻事件之间所经历的过程。活动因某一事件的发生而开始，因下一事件的发生而结束，标志着实体状态迁移的一个片段。

4. 进程(process)
用于描述一个临时实体从进入系统到退出系统所经历的完整过程，包括期间发生的若干事件和若干项活动，以及这些事件和活动之间的逻辑和时序关系。进程是事件与活动的组合

5. 仿真时钟
用于设置仿真的时间变量.仿真时钟推进的时间间隔称为仿真步长.在连续系统仿真中,仿真步长是确定的而且一般是等距的.

### 离散事件系统仿真策略
1. 事件调度
以事件发生的时间为主线的仿真策略。每一事件都有相应的处理程序(事件例程)。

2. 活动扫描
以活动发生的状态条件为主线的仿真策略。每一个活动都有一个发生的状态条件及相应的处理程序(处理例程)。
主要任务：辨明可能导致活动发生的各种条件，并分别给出相应的操作内容，包括未来某一时刻需要完成的操作。

3. 进程交互
以实体的行为过程为主线的仿真策略。

### 模型的形式化描述规范
DEVS(discrete event system specification)。
离散事件系统可以用一个七元组进行描述
$$<\Xi_{i}, S, \Xi_{0}, \delta_{int}, \delta_{ext}, \lambda, ta> (1.3.1)
$$
状态约束：
$$
S={(p,\sigma)|p \in P, \sigma = ta(s)-e} 
$$

行为约束：
$$
\begin{aligned}
&ta: S \rightarrow R_{0, \infty}^{+} \\
&\delta_{int}: S \rightarrow S \\
&\delta_{ext}: \Phi \times Q \rightarrow S\\
&\lambda: Q \rightarrow Y
\end{aligned}
$$

模型接口约束：
$$
\begin{aligned}
\eta_{in}: \Xi_{in}: \rightarrow X
\eta_{out}: \Xi_{o}: \rightarrow Y
\end{aligned}
$$

条件约束：
$$
\begin{aligned}
\psi: Q \times X \rightarrow \Phi, \Phi={True, False}
\end{aligned}
$$

1) $\Xi_{i}$和$\Xi_{o}$分别是输入和输出端口集合
$\Xi_{i}$和$\Xi_{o}$满足模型接口约束$\eta_{in}:\Xi_{i} \rightarrow X$和 $\eta_{out}:\Xi_{o} \rightarrow Y$.X和Y分别是输入值和输出值的集合，均为有限维实数向量。$\eta_{in}$和$\eta_{out}$分别是模型的输入和输出端口函数，通过$\eta_{in}$和$\eta_{out}$分别可以从$\Xi_{i}$和$\Xi_{o}$获取X和Y的值。
2) S是系统状态集合
S有两个描述变量，一个是相位变量$p$，另一个是剩余时间变量$\sigma$。相位变量发生变化时称离散事件系统发生了状态转移；剩余时间改变而相位变量不变时，则称离散事件系统发生了状态推移。在任一时刻$t$, 如果状态$s$的相位$p$在时段$[t-e, t]$内一直保持未变，则称$q=(x,e) \in Q$为离散事件系统的全状态，变量$e$称为$p$的已持续时间。
3) $\psi$是条件判断函数
映射$\psi: Q \times X \rightarrow \Phi$的功能：根据离散事件系统当前的全状态及外部输入的相位值，确定外部转换条件$\Phi$是满足或不满足。
4) $ta$是时间推进函数
映射$ta: S \rightarrow R_{0,\infty}^{+}$给出离散事件状态转移的时间推进机制，由此可以确定任一相位$p$的预期保持时间。设系统在$t$时刻进入相位$p$, 则相位$p$将在时间段$[t,ta(s)]$内保持不变。对于状态$s=(p, \sigma)$，有$e=ta(s)-\sigma$。显然当$e=0$时，$ta(s)=\sigma$.
5) $\delta$是内部状态转移函数
6) $\delta_{ext}$是外部状态转移函数


## 现代仿真技术发展

### 建模方法

1. 一般实体行为建模

例：有限状态机、时间自动机、事件图、状态图、Petri网、Euler网等。

有限状态机：通过事件、状态、变迁等元素来描述系统状态对外部事件的响应。适合用于描述系统状态随时间改变的过程。
时间自动机：与有限状态机相似，增加了一个有限的时钟集合(取实数值)，能够更好地反应实时系统的一些特性，如非确定性、周期性、限制反应、时间延迟等。
事件图：根据有限状态机方法发展而来，适合于离散事件系统行为描述、便于图形化表达的建模方法。
统一建模语言UML(unified modeling language)也将状态图作为基本的行为描述方法。
Petri网：描述事件和条件关系的网络，能够较好地表示离散事件系统的结构，并能较好地表示和分析并行、同步、冲突、死锁等系统特性。
Euler网：面向实体活动的建模方法。以图论为基础，结合有限状态机、活动周期图和Petri网模型的优点，既可以基于状况、活动和约束条件描述系统相位转移的事件逻辑关系，又可以在具体活动中详细描述系统处于不同相位时状态连续变化的动力学关系，同时具有描述模型、功能模型和约束模型的描述能力，适于复杂情况下连续与离散事件混合系统的建模

2. 一般动态系统建模
离散事件系统描述规范DEVS是最具代表性的一般动态系统建模仿真理论体系。
DEVS建立在一般系统论的基础上，为离散事件系统以及连续与离散事件混合系统提供了模块化、层次化的建模方法和统一的模型描述框架。

3. 变结构系统建模
变结构系统建模理论最早源于对社会生态学的仿真研究。
例如JAMES系统是一个支持变结构Agent建模的仿真环境，用于测试协作Agent对环境变化的适应能力。

4. 混合异构层次化建模
在进行复杂系统仿真研究时，应将系统抽象为不同的层次，首先按照面向对象的思想建立系统的概念模型，然后基于系统的概念模型，选择分辨率不同的建模方法对系统中的对象进行不同的抽象和细化，从而建立层次化、多方法混合的动态模型。

5. 多学科多范式建模

6. 多分辨率多视角建模

